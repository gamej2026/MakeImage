<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Image Generator - Azure OpenAI</title>
    <link rel="stylesheet" href="styles.css">
    <script src="config.js"></script>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="logo">
                <svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <rect width="40" height="40" rx="12" fill="url(#gradient)"/>
                    <path d="M20 10L28 16V24L20 30L12 24V16L20 10Z" fill="white"/>
                    <defs>
                        <linearGradient id="gradient" x1="0" y1="0" x2="40" y2="40">
                            <stop offset="0%" stop-color="#667eea"/>
                            <stop offset="100%" stop-color="#764ba2"/>
                        </linearGradient>
                    </defs>
                </svg>
                <h1>AI Image Generator</h1>
            </div>
            <p class="subtitle">Powered by Azure OpenAI GPT Image 1.5</p>
            <div class="usage-display">
                <div class="usage-card">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <rect x="3" y="3" width="18" height="18" rx="3" stroke="currentColor" stroke-width="2"/>
                        <circle cx="8.5" cy="8.5" r="2" fill="currentColor"/>
                        <path d="M3 15L8 10L12 14L17 9L21 13V18C21 19.6569 19.6569 21 18 21H6C4.34315 21 3 19.6569 3 18V15Z" fill="currentColor" opacity="0.5"/>
                    </svg>
                    <div class="usage-info">
                        <span class="usage-label">Total Images Generated</span>
                        <span class="usage-count" id="totalUsageCount">0</span>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Configuration Panel -->
            <div class="config-panel">
                <h2 class="section-title">Configuration</h2>
                
                <!-- API Settings -->
                <div class="config-section">
                    <h3 class="config-subtitle">API Settings</h3>
                    <div class="form-group">
                        <label for="apiEndpoint">Azure OpenAI Endpoint</label>
                        <input type="text" id="apiEndpoint" placeholder="https://your-resource.openai.azure.com">
                        <span class="helper-text">Your Azure OpenAI resource endpoint</span>
                    </div>
                    <div class="form-group">
                        <label for="apiKey">API Key</label>
                        <input type="password" id="apiKey" placeholder="Enter your API key">
                        <span class="helper-text">Your Azure OpenAI API key (stored locally)</span>
                    </div>
                    <div class="form-group">
                        <label for="deploymentName">Deployment Name</label>
                        <input type="text" id="deploymentName" placeholder="dall-e-3" value="dall-e-3">
                        <span class="helper-text">Your DALL-E 3 deployment name</span>
                    </div>
                    <div class="form-group">
                        <label for="apiVersion">API Version</label>
                        <input type="text" id="apiVersion" placeholder="2024-02-01" value="2024-02-01">
                        <span class="helper-text">Azure OpenAI API version</span>
                    </div>
                </div>

                <!-- Image Generation Parameters -->
                <div class="config-section">
                    <h3 class="config-subtitle">Image Parameters</h3>
                    
                    <div class="form-group">
                        <label for="generationMode">Generation Mode</label>
                        <select id="generationMode">
                            <option value="text-only">Text to Image</option>
                            <option value="image-with-text">Image + Text (Reference Image)</option>
                        </select>
                        <span class="helper-text">Choose generation mode</span>
                    </div>

                    <div class="form-group" id="imageUploadGroup" style="display: none;">
                        <label for="referenceImage">Reference Image</label>
                        <div class="image-upload-container">
                            <input type="file" id="referenceImage" accept="image/*" style="display: none;">
                            <button type="button" id="uploadImageBtn" class="btn-upload">
                                <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                                    <path d="M10 14V6M10 6L6 10M10 6L14 10" stroke="currentColor" stroke-width="2"/>
                                    <path d="M3 14V16C3 17.1 3.9 18 5 18H15C16.1 18 17 17.1 17 16V14" stroke="currentColor" stroke-width="2"/>
                                </svg>
                                Upload Image
                            </button>
                            <div id="imagePreview" class="image-preview" style="display: none;">
                                <img id="previewImg" src="" alt="Preview">
                                <button type="button" id="removeImageBtn" class="btn-remove">×</button>
                            </div>
                        </div>
                        <span class="helper-text">Upload a reference image for visual context (not directly processed by API)</span>
                    </div>

                    <div class="form-group">
                        <label for="prompt">Prompt</label>
                        <textarea id="prompt" rows="4" placeholder="Describe the image you want to generate..."></textarea>
                        <span class="helper-text" id="promptHelperText">Detailed description of the image</span>
                        <div class="info-note" style="margin-top: 0.5rem; padding: 0.75rem; background: rgba(79, 172, 254, 0.1); border: 1px solid rgba(79, 172, 254, 0.3); border-radius: 8px; font-size: 0.85rem; color: #4facfe;">
                            <strong>Note:</strong> Azure DALL-E 3 does not support direct image input. The reference image helps you visualize what you want and craft a better prompt.
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="size">Image Size</label>
                        <select id="size">
                            <option value="1024x1024">1024x1024 (Square)</option>
                            <option value="1792x1024">1792x1024 (Landscape)</option>
                            <option value="1024x1792">1024x1792 (Portrait)</option>
                        </select>
                        <span class="helper-text">Dimensions of the generated image</span>
                    </div>

                    <div class="form-group">
                        <label for="quality">Quality</label>
                        <select id="quality">
                            <option value="standard">Standard</option>
                            <option value="hd">HD (High Definition)</option>
                        </select>
                        <span class="helper-text">Image quality level</span>
                    </div>

                    <div class="form-group">
                        <label for="style">Style</label>
                        <select id="style">
                            <option value="vivid">Vivid (Hyper-real and dramatic)</option>
                            <option value="natural">Natural (More natural, less hyper-real)</option>
                        </select>
                        <span class="helper-text">Visual style of the generated image</span>
                    </div>

                    <div class="form-group">
                        <label for="numImages">Number of Images</label>
                        <input type="number" id="numImages" min="1" max="10" value="1">
                        <span class="helper-text">Number of images to generate (1-10)</span>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="action-buttons">
                    <button id="generateBtn" class="btn btn-primary">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path d="M10 2L2 8L10 14L18 8L10 2Z" fill="currentColor"/>
                            <path d="M2 12L10 18L18 12" stroke="currentColor" stroke-width="2"/>
                        </svg>
                        Generate Image
                    </button>
                    <button id="saveConfigBtn" class="btn btn-secondary">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path d="M15 2H5C3.9 2 3 2.9 3 4V16C3 17.1 3.9 18 5 18H15C16.1 18 17 17.1 17 16V4C17 2.9 16.1 2 15 2Z" stroke="currentColor" stroke-width="2"/>
                            <path d="M7 2V6H13V2" stroke="currentColor" stroke-width="2"/>
                        </svg>
                        Save Config
                    </button>
                    <button id="loadConfigBtn" class="btn btn-secondary">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path d="M10 2V10M10 10L6 6M10 10L14 6" stroke="currentColor" stroke-width="2"/>
                            <path d="M3 14V16C3 17.1 3.9 18 5 18H15C16.1 18 17 17.1 17 16V14" stroke="currentColor" stroke-width="2"/>
                        </svg>
                        Load Config
                    </button>
                </div>
            </div>

            <!-- Results Panel -->
            <div class="results-panel">
                <h2 class="section-title">Generated Images</h2>
                
                <!-- Status Messages -->
                <div id="statusMessage" class="status-message"></div>
                
                <!-- Loading Spinner -->
                <div id="loadingSpinner" class="loading-spinner" style="display: none;">
                    <div class="spinner"></div>
                    <p>Generating your images...</p>
                    <p class="loading-subtext">This may take a few moments</p>
                </div>

                <!-- Images Gallery -->
                <div id="imageGallery" class="image-gallery"></div>
            </div>
        </div>

        <!-- Footer -->
        <footer class="footer">
            <p>&copy; 2026 AI Image Generator. Powered by Azure OpenAI.</p>
            <p class="footer-links">
                <a href="https://learn.microsoft.com/en-us/azure/ai-services/openai/dall-e-quickstart" target="_blank">Documentation</a>
                <span>•</span>
                <a href="https://github.com/gamej2026/MakeImage" target="_blank">GitHub</a>
            </p>
        </footer>
    </div>

    <script src="script.js"></script>
</body>
</html>
